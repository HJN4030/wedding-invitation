{"ast":null,"code":"import{useEffect,useRef}from\"react\";import patelUrl from\"../../image/petal.png\";import{jsx as _jsx}from\"react/jsx-runtime\";const X_SPEED=0.6;const X_SPEED_VARIANCE=0.8;const Y_SPEED=0.4;const Y_SPEED_VARIANCE=0.4;const FLIP_SPEED_VARIANCE=0.02;// Petal class\nclass Petal{constructor(canvas,ctx,petalImg){this.canvas=canvas;this.ctx=ctx;this.petalImg=petalImg;this.x=void 0;this.y=void 0;this.w=0;this.h=0;this.opacity=0;this.flip=0;this.xSpeed=0;this.ySpeed=0;this.flipSpeed=0;this.x=Math.random()*canvas.width;this.y=Math.random()*canvas.height*2-canvas.height;this.initialize();}initialize(){this.w=25+Math.random()*15;this.h=20+Math.random()*10;this.opacity=this.w/80;this.flip=Math.random();this.xSpeed=X_SPEED+Math.random()*X_SPEED_VARIANCE;this.ySpeed=Y_SPEED+Math.random()*Y_SPEED_VARIANCE;this.flipSpeed=Math.random()*FLIP_SPEED_VARIANCE;}draw(){if(this.y>this.canvas.height||this.x>this.canvas.width){this.initialize();const rand=Math.random()*(this.canvas.width+this.canvas.height);if(rand>this.canvas.width){this.x=0;this.y=rand-this.canvas.width;}else{this.x=rand;this.y=0;}}this.ctx.globalAlpha=this.opacity;this.ctx.drawImage(this.petalImg,this.x,this.y,this.w*(0.6+Math.abs(Math.cos(this.flip))/3),this.h*(0.8+Math.abs(Math.sin(this.flip))/5));}animate(){this.x+=this.xSpeed;this.y+=this.ySpeed;this.flip+=this.flipSpeed;this.draw();}}export const BGEffect=()=>{const ref=useRef(null);const petalsRef=useRef([]);const resizeTimeoutRef=useRef(0);const animationFrameIdRef=useRef(0);useEffect(()=>{const canvas=ref.current;canvas.width=window.innerWidth;canvas.height=window.innerHeight;const ctx=canvas.getContext(\"2d\");const petalImg=new Image();petalImg.src=patelUrl;const getPetalNum=()=>{return Math.floor(window.innerWidth*window.innerHeight/30000);};const initializePetals=()=>{const count=getPetalNum();const petals=[];for(let i=0;i<count;i++){petals.push(new Petal(canvas,ctx,petalImg));}petalsRef.current=petals;};initializePetals();const render=()=>{ctx.clearRect(0,0,canvas.width,canvas.height);petalsRef.current.forEach(petal=>petal.animate());animationFrameIdRef.current=requestAnimationFrame(render);};render();const onResize=()=>{clearTimeout(resizeTimeoutRef.current);resizeTimeoutRef.current=window.setTimeout(()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;const newPetalNum=getPetalNum();if(newPetalNum>petalsRef.current.length){for(let i=petalsRef.current.length;i<newPetalNum;i++){petalsRef.current.push(new Petal(canvas,ctx,petalImg));}}else if(newPetalNum<petalsRef.current.length){petalsRef.current.splice(newPetalNum);}},100);};window.addEventListener(\"resize\",onResize);return()=>{window.removeEventListener(\"resize\",onResize);cancelAnimationFrame(animationFrameIdRef.current);};},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"bg-effect\",children:/*#__PURE__*/_jsx(\"canvas\",{ref:ref})});};","map":{"version":3,"names":["useEffect","useRef","patelUrl","jsx","_jsx","X_SPEED","X_SPEED_VARIANCE","Y_SPEED","Y_SPEED_VARIANCE","FLIP_SPEED_VARIANCE","Petal","constructor","canvas","ctx","petalImg","x","y","w","h","opacity","flip","xSpeed","ySpeed","flipSpeed","Math","random","width","height","initialize","draw","rand","globalAlpha","drawImage","abs","cos","sin","animate","BGEffect","ref","petalsRef","resizeTimeoutRef","animationFrameIdRef","current","window","innerWidth","innerHeight","getContext","Image","src","getPetalNum","floor","initializePetals","count","petals","i","push","render","clearRect","forEach","petal","requestAnimationFrame","onResize","clearTimeout","setTimeout","newPetalNum","length","splice","addEventListener","removeEventListener","cancelAnimationFrame","className","children"],"sources":["/workspaces/wedding-invitation/src/component/bgEffect/index.tsx"],"sourcesContent":["import { useEffect, useRef } from \"react\"\nimport patelUrl from \"../../image/petal.png\"\n\nconst X_SPEED = 0.6\nconst X_SPEED_VARIANCE = 0.8\n\nconst Y_SPEED = 0.4\nconst Y_SPEED_VARIANCE = 0.4\n\nconst FLIP_SPEED_VARIANCE = 0.02\n\n// Petal class\nclass Petal {\n  x: number\n  y: number\n  w: number = 0\n  h: number = 0\n  opacity: number = 0\n  flip: number = 0\n  xSpeed: number = 0\n  ySpeed: number = 0\n  flipSpeed: number = 0\n\n  constructor(\n    private canvas: HTMLCanvasElement,\n    private ctx: CanvasRenderingContext2D,\n    private petalImg: HTMLImageElement,\n  ) {\n    this.x = Math.random() * canvas.width\n    this.y = Math.random() * canvas.height * 2 - canvas.height\n\n    this.initialize()\n  }\n\n  initialize() {\n    this.w = 25 + Math.random() * 15\n    this.h = 20 + Math.random() * 10\n    this.opacity = this.w / 80\n    this.flip = Math.random()\n\n    this.xSpeed = X_SPEED + Math.random() * X_SPEED_VARIANCE\n    this.ySpeed = Y_SPEED + Math.random() * Y_SPEED_VARIANCE\n    this.flipSpeed = Math.random() * FLIP_SPEED_VARIANCE\n  }\n\n  draw() {\n    if (this.y > this.canvas.height || this.x > this.canvas.width) {\n      this.initialize()\n\n      const rand = Math.random() * (this.canvas.width + this.canvas.height)\n      if (rand > this.canvas.width) {\n        this.x = 0\n        this.y = rand - this.canvas.width\n      } else {\n        this.x = rand\n        this.y = 0\n      }\n    }\n    this.ctx.globalAlpha = this.opacity\n    this.ctx.drawImage(\n      this.petalImg,\n      this.x,\n      this.y,\n      this.w * (0.6 + Math.abs(Math.cos(this.flip)) / 3),\n      this.h * (0.8 + Math.abs(Math.sin(this.flip)) / 5),\n    )\n  }\n\n  animate() {\n    this.x += this.xSpeed\n    this.y += this.ySpeed\n    this.flip += this.flipSpeed\n    this.draw()\n  }\n}\n\nexport const BGEffect = () => {\n  const ref = useRef<HTMLCanvasElement>(\n    null,\n  ) as React.MutableRefObject<HTMLCanvasElement>\n\n  const petalsRef = useRef<Petal[]>([])\n\n  const resizeTimeoutRef = useRef(0)\n  const animationFrameIdRef = useRef(0)\n\n  useEffect(() => {\n    const canvas = ref.current\n\n    canvas.width = window.innerWidth\n    canvas.height = window.innerHeight\n\n    const ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D\n\n    const petalImg = new Image()\n    petalImg.src = patelUrl\n\n    const getPetalNum = () => {\n      return Math.floor((window.innerWidth * window.innerHeight) / 30000)\n    }\n\n    const initializePetals = () => {\n      const count = getPetalNum()\n      const petals = []\n      for (let i = 0; i < count; i++) {\n        petals.push(new Petal(canvas, ctx, petalImg))\n      }\n      petalsRef.current = petals\n    }\n\n    initializePetals()\n\n    const render = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height)\n      petalsRef.current.forEach((petal) => petal.animate())\n      animationFrameIdRef.current = requestAnimationFrame(render)\n    }\n\n    render()\n\n    const onResize = () => {\n      clearTimeout(resizeTimeoutRef.current)\n      resizeTimeoutRef.current = window.setTimeout(() => {\n        canvas.width = window.innerWidth\n        canvas.height = window.innerHeight\n        const newPetalNum = getPetalNum()\n        if (newPetalNum > petalsRef.current.length) {\n          for (let i = petalsRef.current.length; i < newPetalNum; i++) {\n            petalsRef.current.push(new Petal(canvas, ctx, petalImg))\n          }\n        } else if (newPetalNum < petalsRef.current.length) {\n          petalsRef.current.splice(newPetalNum)\n        }\n      }, 100)\n    }\n\n    window.addEventListener(\"resize\", onResize)\n\n    return () => {\n      window.removeEventListener(\"resize\", onResize)\n      cancelAnimationFrame(animationFrameIdRef.current)\n    }\n  }, [])\n\n  return (\n    <div className=\"bg-effect\">\n      <canvas ref={ref} />\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}