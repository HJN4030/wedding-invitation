{"ast":null,"code":"var _jsxFileName = \"/workspaces/wedding-invitation/src/component/bgEffect/index.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef } from \"react\";\nimport patelUrl from \"../../image/petal.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst X_SPEED = 0.6;\nconst X_SPEED_VARIANCE = 0.8;\nconst Y_SPEED = 0.4;\nconst Y_SPEED_VARIANCE = 0.4;\nconst FLIP_SPEED_VARIANCE = 0.02;\n\n// Petal class\nclass Petal {\n  constructor(canvas, ctx, petalImg) {\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.petalImg = petalImg;\n    this.x = void 0;\n    this.y = void 0;\n    this.w = 0;\n    this.h = 0;\n    this.opacity = 0;\n    this.flip = 0;\n    this.xSpeed = 0;\n    this.ySpeed = 0;\n    this.flipSpeed = 0;\n    this.x = Math.random() * canvas.width;\n    this.y = Math.random() * canvas.height * 2 - canvas.height;\n    this.initialize();\n  }\n  initialize() {\n    this.w = 25 + Math.random() * 15;\n    this.h = 20 + Math.random() * 10;\n    this.opacity = this.w / 80;\n    this.flip = Math.random();\n    this.xSpeed = X_SPEED + Math.random() * X_SPEED_VARIANCE;\n    this.ySpeed = Y_SPEED + Math.random() * Y_SPEED_VARIANCE;\n    this.flipSpeed = Math.random() * FLIP_SPEED_VARIANCE;\n  }\n  draw() {\n    if (this.y > this.canvas.height || this.x > this.canvas.width) {\n      this.initialize();\n      const rand = Math.random() * (this.canvas.width + this.canvas.height);\n      if (rand > this.canvas.width) {\n        this.x = 0;\n        this.y = rand - this.canvas.width;\n      } else {\n        this.x = rand;\n        this.y = 0;\n      }\n    }\n    this.ctx.globalAlpha = this.opacity;\n    this.ctx.drawImage(this.petalImg, this.x, this.y, this.w * (0.6 + Math.abs(Math.cos(this.flip)) / 3), this.h * (0.8 + Math.abs(Math.sin(this.flip)) / 5));\n  }\n  animate() {\n    this.x += this.xSpeed;\n    this.y += this.ySpeed;\n    this.flip += this.flipSpeed;\n    this.draw();\n  }\n}\nexport const BGEffect = () => {\n  _s();\n  const ref = useRef(null);\n  const petalsRef = useRef([]);\n  const resizeTimeoutRef = useRef(0);\n  const animationFrameIdRef = useRef(0);\n  useEffect(() => {\n    const canvas = ref.current;\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n    const ctx = canvas.getContext(\"2d\");\n    const petalImg = new Image();\n    petalImg.src = patelUrl;\n    const getPetalNum = () => {\n      return Math.floor(window.innerWidth * window.innerHeight / 30000);\n    };\n    const initializePetals = () => {\n      const count = getPetalNum();\n      const petals = [];\n      for (let i = 0; i < count; i++) {\n        petals.push(new Petal(canvas, ctx, petalImg));\n      }\n      petalsRef.current = petals;\n    };\n    initializePetals();\n    const render = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      petalsRef.current.forEach(petal => petal.animate());\n      animationFrameIdRef.current = requestAnimationFrame(render);\n    };\n    render();\n    const onResize = () => {\n      clearTimeout(resizeTimeoutRef.current);\n      resizeTimeoutRef.current = window.setTimeout(() => {\n        canvas.width = window.innerWidth;\n        canvas.height = window.innerHeight;\n        const newPetalNum = getPetalNum();\n        if (newPetalNum > petalsRef.current.length) {\n          for (let i = petalsRef.current.length; i < newPetalNum; i++) {\n            petalsRef.current.push(new Petal(canvas, ctx, petalImg));\n          }\n        } else if (newPetalNum < petalsRef.current.length) {\n          petalsRef.current.splice(newPetalNum);\n        }\n      }, 100);\n    };\n    window.addEventListener(\"resize\", onResize);\n    return () => {\n      window.removeEventListener(\"resize\", onResize);\n      cancelAnimationFrame(animationFrameIdRef.current);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-effect\",\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: ref\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n};\n_s(BGEffect, \"wGrYwO4iVKTHotxX840WFu2ikJ4=\");\n_c = BGEffect;\nvar _c;\n$RefreshReg$(_c, \"BGEffect\");","map":{"version":3,"names":["useEffect","useRef","patelUrl","jsxDEV","_jsxDEV","X_SPEED","X_SPEED_VARIANCE","Y_SPEED","Y_SPEED_VARIANCE","FLIP_SPEED_VARIANCE","Petal","constructor","canvas","ctx","petalImg","x","y","w","h","opacity","flip","xSpeed","ySpeed","flipSpeed","Math","random","width","height","initialize","draw","rand","globalAlpha","drawImage","abs","cos","sin","animate","BGEffect","_s","ref","petalsRef","resizeTimeoutRef","animationFrameIdRef","current","window","innerWidth","innerHeight","getContext","Image","src","getPetalNum","floor","initializePetals","count","petals","i","push","render","clearRect","forEach","petal","requestAnimationFrame","onResize","clearTimeout","setTimeout","newPetalNum","length","splice","addEventListener","removeEventListener","cancelAnimationFrame","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/workspaces/wedding-invitation/src/component/bgEffect/index.tsx"],"sourcesContent":["import { useEffect, useRef } from \"react\"\nimport patelUrl from \"../../image/petal.png\"\n\nconst X_SPEED = 0.6\nconst X_SPEED_VARIANCE = 0.8\n\nconst Y_SPEED = 0.4\nconst Y_SPEED_VARIANCE = 0.4\n\nconst FLIP_SPEED_VARIANCE = 0.02\n\n// Petal class\nclass Petal {\n  x: number\n  y: number\n  w: number = 0\n  h: number = 0\n  opacity: number = 0\n  flip: number = 0\n  xSpeed: number = 0\n  ySpeed: number = 0\n  flipSpeed: number = 0\n\n  constructor(\n    private canvas: HTMLCanvasElement,\n    private ctx: CanvasRenderingContext2D,\n    private petalImg: HTMLImageElement,\n  ) {\n    this.x = Math.random() * canvas.width\n    this.y = Math.random() * canvas.height * 2 - canvas.height\n\n    this.initialize()\n  }\n\n  initialize() {\n    this.w = 25 + Math.random() * 15\n    this.h = 20 + Math.random() * 10\n    this.opacity = this.w / 80\n    this.flip = Math.random()\n\n    this.xSpeed = X_SPEED + Math.random() * X_SPEED_VARIANCE\n    this.ySpeed = Y_SPEED + Math.random() * Y_SPEED_VARIANCE\n    this.flipSpeed = Math.random() * FLIP_SPEED_VARIANCE\n  }\n\n  draw() {\n    if (this.y > this.canvas.height || this.x > this.canvas.width) {\n      this.initialize()\n\n      const rand = Math.random() * (this.canvas.width + this.canvas.height)\n      if (rand > this.canvas.width) {\n        this.x = 0\n        this.y = rand - this.canvas.width\n      } else {\n        this.x = rand\n        this.y = 0\n      }\n    }\n    this.ctx.globalAlpha = this.opacity\n    this.ctx.drawImage(\n      this.petalImg,\n      this.x,\n      this.y,\n      this.w * (0.6 + Math.abs(Math.cos(this.flip)) / 3),\n      this.h * (0.8 + Math.abs(Math.sin(this.flip)) / 5),\n    )\n  }\n\n  animate() {\n    this.x += this.xSpeed\n    this.y += this.ySpeed\n    this.flip += this.flipSpeed\n    this.draw()\n  }\n}\n\nexport const BGEffect = () => {\n  const ref = useRef<HTMLCanvasElement>(\n    null,\n  ) as React.MutableRefObject<HTMLCanvasElement>\n\n  const petalsRef = useRef<Petal[]>([])\n\n  const resizeTimeoutRef = useRef(0)\n  const animationFrameIdRef = useRef(0)\n\n  useEffect(() => {\n    const canvas = ref.current\n\n    canvas.width = window.innerWidth\n    canvas.height = window.innerHeight\n\n    const ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D\n\n    const petalImg = new Image()\n    petalImg.src = patelUrl\n\n    const getPetalNum = () => {\n      return Math.floor((window.innerWidth * window.innerHeight) / 30000)\n    }\n\n    const initializePetals = () => {\n      const count = getPetalNum()\n      const petals = []\n      for (let i = 0; i < count; i++) {\n        petals.push(new Petal(canvas, ctx, petalImg))\n      }\n      petalsRef.current = petals\n    }\n\n    initializePetals()\n\n    const render = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height)\n      petalsRef.current.forEach((petal) => petal.animate())\n      animationFrameIdRef.current = requestAnimationFrame(render)\n    }\n\n    render()\n\n    const onResize = () => {\n      clearTimeout(resizeTimeoutRef.current)\n      resizeTimeoutRef.current = window.setTimeout(() => {\n        canvas.width = window.innerWidth\n        canvas.height = window.innerHeight\n        const newPetalNum = getPetalNum()\n        if (newPetalNum > petalsRef.current.length) {\n          for (let i = petalsRef.current.length; i < newPetalNum; i++) {\n            petalsRef.current.push(new Petal(canvas, ctx, petalImg))\n          }\n        } else if (newPetalNum < petalsRef.current.length) {\n          petalsRef.current.splice(newPetalNum)\n        }\n      }, 100)\n    }\n\n    window.addEventListener(\"resize\", onResize)\n\n    return () => {\n      window.removeEventListener(\"resize\", onResize)\n      cancelAnimationFrame(animationFrameIdRef.current)\n    }\n  }, [])\n\n  return (\n    <div className=\"bg-effect\">\n      <canvas ref={ref} />\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}