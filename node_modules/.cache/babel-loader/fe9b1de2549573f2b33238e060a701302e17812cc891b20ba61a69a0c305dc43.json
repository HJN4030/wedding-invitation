{"ast":null,"code":"import{useCallback,useEffect,useMemo,useRef,useState}from\"react\";import{ReactComponent as ArrowLeft}from\"../../image/angle-left-sm.svg\";import{LazyDiv}from\"../lazyDiv\";import{Button}from\"../button\";import{useModal}from\"../store\";import{GALLERY_IMAGES}from\"../../const\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const CAROUSEL_ITEMS=GALLERY_IMAGES.map((item,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"carousel-item\",children:/*#__PURE__*/_jsx(\"img\",{src:item,draggable:false,alt:\"\".concat(idx)})},idx));const DRAG_SENSITIVITY=15;export const Gallery=()=>{const{openModal,closeModal}=useModal();const carouselRef=useRef(null);useEffect(()=>{// preload images\nGALLERY_IMAGES.forEach(image=>{const img=new Image();img.src=image;});},[]);const[slide,_setSlide]=useState(0);const slideRef=useRef(0);const setSlide=slide=>{_setSlide(slide);slideRef.current=slide;};const[status,_setStatus]=useState(\"stationary\");const statusRef=useRef(\"stationary\");const setStatus=status=>{_setStatus(status);statusRef.current=status;};const[dragOption,_setDragOption]=useState({startingClientX:0,startingClientY:0,currentTranslateX:0});const dragOptionRef=useRef({startingClientX:0,startingClientY:0,currentTranslateX:0});const setDragOption=dragOption=>{_setDragOption(dragOption);dragOptionRef.current=dragOption;};const[moveOption,setMoveOption]=useState({srcIdx:0,dstIdx:0});const clickMoveRef=useRef(null);const setClickMove=clickMove=>{clickMoveRef.current=clickMove;};// For debugging\n// useEffect(() => {\n//   console.log(status)\n// }, [status])\nconst click=(status,clientX,clientY,carouselWidth)=>{if(status!==\"stationary\")return;setDragOption({startingClientX:clientX,startingClientY:clientY,currentTranslateX:-carouselWidth});setStatus(\"clicked\");};const dragging=useCallback((dragOption,clientX,carouselWidth)=>{let moveTranslateX=clientX-dragOption.startingClientX;if(moveTranslateX>carouselWidth){moveTranslateX=carouselWidth;}else if(moveTranslateX<-carouselWidth){moveTranslateX=-carouselWidth;}setDragOption({...dragOption,currentTranslateX:moveTranslateX-carouselWidth});},[]);const dragEnd=useCallback((slide,dragOption,carouselWidth)=>{let move=0;if(dragOption.currentTranslateX<-carouselWidth*1.1){move=1;}else if(dragOption.currentTranslateX>-carouselWidth*0.9){move=-1;}setDragOption({...dragOption,currentTranslateX:-carouselWidth*(move+1)});setStatus(\"dragEnding\");setTimeout(()=>{setDragOption({...dragOption,currentTranslateX:-carouselWidth});setStatus(\"stationary\");setSlide((slide+move+CAROUSEL_ITEMS.length)%CAROUSEL_ITEMS.length);},300);},[]);const move=useCallback((srcIdx,dstIdx)=>{setSlide(dstIdx);if(srcIdx<dstIdx){setStatus(\"moving-right\");}else{setStatus(\"moving-left\");}setMoveOption({srcIdx,dstIdx});setTimeout(()=>{setClickMove(null);setStatus(\"stationary\");},300);},[]);/* Events */const onMouseMove=useCallback(e=>{const status=statusRef.current;if(status===\"clicked\"){setStatus(\"dragging\");}else if(status===\"dragging\"){e.preventDefault();dragging(dragOptionRef.current,e.clientX,carouselRef.current.clientWidth);}},[dragging]);const onTouchMove=useCallback(e=>{const status=statusRef.current;if(status===\"clicked\"){e.preventDefault();const xMove=e.targetTouches[0].clientX-dragOptionRef.current.startingClientX;const yMove=e.targetTouches[0].clientY-dragOptionRef.current.startingClientY;if(Math.abs(xMove)>DRAG_SENSITIVITY){setStatus(\"dragging\");}else if(Math.abs(yMove)>DRAG_SENSITIVITY){setStatus(\"clickCanceled\");}}else if(status===\"dragging\"){e.preventDefault();dragging(dragOptionRef.current,e.targetTouches[0].clientX,carouselRef.current.clientWidth);}},[dragging]);const onMouseTouchUp=useCallback(()=>{const status=statusRef.current;const clickMove=clickMoveRef.current;const slide=slideRef.current;if(status===\"clicked\"){if(clickMove===\"left\"){move(slide,(slide+CAROUSEL_ITEMS.length-1)%CAROUSEL_ITEMS.length);}else if(clickMove===\"right\"){move(slide,(slide+1)%CAROUSEL_ITEMS.length);}else{setStatus(\"stationary\");}}else if(status===\"dragging\"){dragEnd(slide,dragOptionRef.current,carouselRef.current.clientWidth);}else if(status===\"clickCanceled\"){setStatus(\"stationary\");}},[dragEnd,move]);useEffect(()=>{const carouselElement=carouselRef.current;window.addEventListener(\"mousemove\",onMouseMove);carouselElement.addEventListener(\"touchmove\",onTouchMove);window.addEventListener(\"mouseup\",onMouseTouchUp);window.addEventListener(\"touchend\",onMouseTouchUp);return()=>{window.removeEventListener(\"mousemove\",onMouseMove);carouselElement.removeEventListener(\"touchmove\",onTouchMove);window.removeEventListener(\"mouseup\",onMouseTouchUp);window.removeEventListener(\"touchend\",onMouseTouchUp);};},[onMouseMove,onTouchMove,onMouseTouchUp]);const onIndicatorClick=useCallback((status,srcIdx,dstIdx)=>{if(status!==\"stationary\"||srcIdx===dstIdx)return;move(srcIdx,dstIdx);},[move]);const transformStyle=useMemo(()=>{switch(status){case\"dragging\":case\"dragEnding\":return{transform:\"translateX(\".concat(dragOption.currentTranslateX,\"px)\")};default:return{};}},[status,dragOption]);const transformClass=useMemo(()=>{const className=\"carousel-list\";switch(status){case\"dragEnding\":return className+\" transitioning\";case\"moving-left\":return className+\" moving-left\";case\"moving-right\":return className+\" moving-right\";default:return className;}},[status]);return/*#__PURE__*/_jsxs(LazyDiv,{className:\"card gallery\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"english\",children:\"Gallery\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"carousel\",ref:carouselRef,onMouseDown:e=>click(statusRef.current,e.clientX,e.clientY,e.currentTarget.clientWidth),onTouchStart:e=>click(statusRef.current,e.targetTouches[0].clientX,e.targetTouches[0].clientY,e.currentTarget.clientWidth),children:[/*#__PURE__*/_jsxs(\"div\",{className:transformClass,style:transformStyle,children:[[\"dragging\",\"dragEnding\"].includes(status)&&[...(slide===0?[CAROUSEL_ITEMS[CAROUSEL_ITEMS.length-1]]:[]),...CAROUSEL_ITEMS.slice(slide===0?0:slide-1,slide+2),...(slide===CAROUSEL_ITEMS.length-1?[CAROUSEL_ITEMS[0]]:[])],status===\"moving-right\"&&CAROUSEL_ITEMS.slice(moveOption.srcIdx,moveOption.dstIdx+1),status===\"moving-left\"&&CAROUSEL_ITEMS.slice(moveOption.dstIdx,moveOption.srcIdx+1),[\"stationary\",\"clicked\",\"clickCanceled\"].includes(status)&&CAROUSEL_ITEMS[slide]]}),/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-control\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"control left\",onMouseDown:()=>{if(statusRef.current===\"stationary\")setClickMove(\"left\");},onTouchStart:()=>{if(statusRef.current===\"stationary\")setClickMove(\"left\");},children:/*#__PURE__*/_jsx(ArrowLeft,{className:\"arrow\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"control right\",onMouseDown:()=>{if(statusRef.current===\"stationary\")setClickMove(\"right\");},onTouchStart:()=>{if(statusRef.current===\"stationary\")setClickMove(\"right\");},children:/*#__PURE__*/_jsx(ArrowLeft,{className:\"arrow right\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"carousel-indicator\",children:CAROUSEL_ITEMS.map((_,idx)=>/*#__PURE__*/_jsx(\"button\",{className:\"indicator\".concat(idx===slide?\" active\":\"\"),onClick:()=>onIndicatorClick(statusRef.current,slideRef.current,idx)},idx))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"break\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>openModal({className:\"all-photo-modal\",closeOnClickBackground:true,header:/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uC0AC\\uC9C4 \\uC804\\uCCB4\\uBCF4\\uAE30\"}),content:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"photo-list\",children:GALLERY_IMAGES.map((image,idx)=>/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"\".concat(idx),draggable:false,onClick:()=>{if(statusRef.current===\"stationary\"){if(idx!==slideRef.current){move(slideRef.current,idx);}closeModal();}}},idx))}),/*#__PURE__*/_jsx(\"div\",{className:\"break\"})]}),footer:/*#__PURE__*/_jsx(Button,{buttonStyle:\"style2\",className:\"bg-light-grey-color text-dark-color\",onClick:closeModal,children:\"\\uB2EB\\uAE30\"})}),children:\"\\uC0AC\\uC9C4 \\uC804\\uCCB4\\uBCF4\\uAE30\"})]});};","map":{"version":3,"names":["useCallback","useEffect","useMemo","useRef","useState","ReactComponent","ArrowLeft","LazyDiv","Button","useModal","GALLERY_IMAGES","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CAROUSEL_ITEMS","map","item","idx","className","children","src","draggable","alt","concat","DRAG_SENSITIVITY","Gallery","openModal","closeModal","carouselRef","forEach","image","img","Image","slide","_setSlide","slideRef","setSlide","current","status","_setStatus","statusRef","setStatus","dragOption","_setDragOption","startingClientX","startingClientY","currentTranslateX","dragOptionRef","setDragOption","moveOption","setMoveOption","srcIdx","dstIdx","clickMoveRef","setClickMove","clickMove","click","clientX","clientY","carouselWidth","dragging","moveTranslateX","dragEnd","move","setTimeout","length","onMouseMove","e","preventDefault","clientWidth","onTouchMove","xMove","targetTouches","yMove","Math","abs","onMouseTouchUp","carouselElement","window","addEventListener","removeEventListener","onIndicatorClick","transformStyle","transform","transformClass","ref","onMouseDown","currentTarget","onTouchStart","style","includes","slice","_","onClick","closeOnClickBackground","header","content","footer","buttonStyle"],"sources":["/workspaces/wedding-invitation/src/component/gallery/index.tsx"],"sourcesContent":["import { useCallback, useEffect, useMemo, useRef, useState } from \"react\"\nimport { ReactComponent as ArrowLeft } from \"../../image/angle-left-sm.svg\"\nimport { LazyDiv } from \"../lazyDiv\"\nimport { Button } from \"../button\"\nimport { useModal } from \"../store\"\nimport { GALLERY_IMAGES } from \"../../const\"\n\nconst CAROUSEL_ITEMS = GALLERY_IMAGES.map((item, idx) => (\n  <div className=\"carousel-item\" key={idx}>\n    <img src={item} draggable={false} alt={`${idx}`} />\n  </div>\n))\n\nconst DRAG_SENSITIVITY = 15\n\ntype Status =\n  | \"stationary\"\n  | \"clicked\"\n  | \"clickCanceled\"\n  | \"dragging\"\n  | \"dragEnding\"\n  | \"moving-left\"\n  | \"moving-right\"\n\ntype DragOption = {\n  startingClientX: number\n  startingClientY: number\n  currentTranslateX: number\n}\n\ntype ClickMove = \"left\" | \"right\" | null\n\nexport const Gallery = () => {\n  const { openModal, closeModal } = useModal()\n  const carouselRef = useRef<HTMLDivElement>(\n    null,\n  ) as React.MutableRefObject<HTMLDivElement>\n\n  useEffect(() => {\n    // preload images\n    GALLERY_IMAGES.forEach((image) => {\n      const img = new Image()\n      img.src = image\n    })\n  }, [])\n\n  const [slide, _setSlide] = useState(0)\n  const slideRef = useRef(0)\n  const setSlide = (slide: number) => {\n    _setSlide(slide)\n    slideRef.current = slide\n  }\n\n  const [status, _setStatus] = useState<Status>(\"stationary\")\n  const statusRef = useRef<Status>(\"stationary\")\n  const setStatus = (status: Status) => {\n    _setStatus(status)\n    statusRef.current = status\n  }\n\n  const [dragOption, _setDragOption] = useState<DragOption>({\n    startingClientX: 0,\n    startingClientY: 0,\n    currentTranslateX: 0,\n  })\n  const dragOptionRef = useRef<DragOption>({\n    startingClientX: 0,\n    startingClientY: 0,\n    currentTranslateX: 0,\n  })\n  const setDragOption = (dragOption: DragOption) => {\n    _setDragOption(dragOption)\n    dragOptionRef.current = dragOption\n  }\n\n  const [moveOption, setMoveOption] = useState({\n    srcIdx: 0,\n    dstIdx: 0,\n  })\n\n  const clickMoveRef = useRef<ClickMove>(null)\n  const setClickMove = (clickMove: ClickMove) => {\n    clickMoveRef.current = clickMove\n  }\n\n  // For debugging\n  // useEffect(() => {\n  //   console.log(status)\n  // }, [status])\n\n  const click = (\n    status: Status,\n    clientX: number,\n    clientY: number,\n    carouselWidth: number,\n  ) => {\n    if (status !== \"stationary\") return\n    setDragOption({\n      startingClientX: clientX,\n      startingClientY: clientY,\n      currentTranslateX: -carouselWidth,\n    })\n    setStatus(\"clicked\")\n  }\n\n  const dragging = useCallback(\n    (dragOption: DragOption, clientX: number, carouselWidth: number) => {\n      let moveTranslateX = clientX - dragOption.startingClientX\n\n      if (moveTranslateX > carouselWidth) {\n        moveTranslateX = carouselWidth\n      } else if (moveTranslateX < -carouselWidth) {\n        moveTranslateX = -carouselWidth\n      }\n\n      setDragOption({\n        ...dragOption,\n        currentTranslateX: moveTranslateX - carouselWidth,\n      })\n    },\n    [],\n  )\n\n  const dragEnd = useCallback(\n    (slide: number, dragOption: DragOption, carouselWidth: number) => {\n      let move = 0\n      if (dragOption.currentTranslateX < -carouselWidth * 1.1) {\n        move = 1\n      } else if (dragOption.currentTranslateX > -carouselWidth * 0.9) {\n        move = -1\n      }\n\n      setDragOption({\n        ...dragOption,\n        currentTranslateX: -carouselWidth * (move + 1),\n      })\n\n      setStatus(\"dragEnding\")\n\n      setTimeout(() => {\n        setDragOption({\n          ...dragOption,\n          currentTranslateX: -carouselWidth,\n        })\n        setStatus(\"stationary\")\n        setSlide((slide + move + CAROUSEL_ITEMS.length) % CAROUSEL_ITEMS.length)\n      }, 300)\n    },\n    [],\n  )\n\n  const move = useCallback((srcIdx: number, dstIdx: number) => {\n    setSlide(dstIdx)\n    if (srcIdx < dstIdx) {\n      setStatus(\"moving-right\")\n    } else {\n      setStatus(\"moving-left\")\n    }\n\n    setMoveOption({ srcIdx, dstIdx })\n\n    setTimeout(() => {\n      setClickMove(null)\n      setStatus(\"stationary\")\n    }, 300)\n  }, [])\n\n  /* Events */\n  const onMouseMove = useCallback(\n    (e: MouseEvent) => {\n      const status = statusRef.current\n\n      if (status === \"clicked\") {\n        setStatus(\"dragging\")\n      } else if (status === \"dragging\") {\n        e.preventDefault()\n        dragging(\n          dragOptionRef.current,\n          e.clientX,\n          carouselRef.current.clientWidth,\n        )\n      }\n    },\n    [dragging],\n  )\n\n  const onTouchMove = useCallback(\n    (e: TouchEvent) => {\n      const status = statusRef.current\n\n      if (status === \"clicked\") {\n        e.preventDefault()\n        const xMove =\n          e.targetTouches[0].clientX - dragOptionRef.current.startingClientX\n        const yMove =\n          e.targetTouches[0].clientY - dragOptionRef.current.startingClientY\n        if (Math.abs(xMove) > DRAG_SENSITIVITY) {\n          setStatus(\"dragging\")\n        } else if (Math.abs(yMove) > DRAG_SENSITIVITY) {\n          setStatus(\"clickCanceled\")\n        }\n      } else if (status === \"dragging\") {\n        e.preventDefault()\n        dragging(\n          dragOptionRef.current,\n          e.targetTouches[0].clientX,\n          carouselRef.current.clientWidth,\n        )\n      }\n    },\n    [dragging],\n  )\n\n  const onMouseTouchUp = useCallback(() => {\n    const status = statusRef.current\n    const clickMove = clickMoveRef.current\n    const slide = slideRef.current\n\n    if (status === \"clicked\") {\n      if (clickMove === \"left\") {\n        move(slide, (slide + CAROUSEL_ITEMS.length - 1) % CAROUSEL_ITEMS.length)\n      } else if (clickMove === \"right\") {\n        move(slide, (slide + 1) % CAROUSEL_ITEMS.length)\n      } else {\n        setStatus(\"stationary\")\n      }\n    } else if (status === \"dragging\") {\n      dragEnd(slide, dragOptionRef.current, carouselRef.current.clientWidth)\n    } else if (status === \"clickCanceled\") {\n      setStatus(\"stationary\")\n    }\n  }, [dragEnd, move])\n\n  useEffect(() => {\n    const carouselElement = carouselRef.current\n\n    window.addEventListener(\"mousemove\", onMouseMove)\n    carouselElement.addEventListener(\"touchmove\", onTouchMove)\n    window.addEventListener(\"mouseup\", onMouseTouchUp)\n    window.addEventListener(\"touchend\", onMouseTouchUp)\n    return () => {\n      window.removeEventListener(\"mousemove\", onMouseMove)\n      carouselElement.removeEventListener(\"touchmove\", onTouchMove)\n      window.removeEventListener(\"mouseup\", onMouseTouchUp)\n      window.removeEventListener(\"touchend\", onMouseTouchUp)\n    }\n  }, [onMouseMove, onTouchMove, onMouseTouchUp])\n\n  const onIndicatorClick = useCallback(\n    (status: Status, srcIdx: number, dstIdx: number) => {\n      if (status !== \"stationary\" || srcIdx === dstIdx) return\n      move(srcIdx, dstIdx)\n    },\n    [move],\n  )\n\n  const transformStyle = useMemo(() => {\n    switch (status) {\n      case \"dragging\":\n      case \"dragEnding\":\n        return { transform: `translateX(${dragOption.currentTranslateX}px)` }\n      default:\n        return {}\n    }\n  }, [status, dragOption])\n\n  const transformClass = useMemo(() => {\n    const className = \"carousel-list\"\n    switch (status) {\n      case \"dragEnding\":\n        return className + \" transitioning\"\n      case \"moving-left\":\n        return className + \" moving-left\"\n      case \"moving-right\":\n        return className + \" moving-right\"\n      default:\n        return className\n    }\n  }, [status])\n\n  return (\n    <LazyDiv className=\"card gallery\">\n      <h2 className=\"english\">Gallery</h2>\n      <div className=\"carousel-wrapper\">\n        <div\n          className=\"carousel\"\n          ref={carouselRef}\n          onMouseDown={(e) =>\n            click(\n              statusRef.current,\n              e.clientX,\n              e.clientY,\n              e.currentTarget.clientWidth,\n            )\n          }\n          onTouchStart={(e) =>\n            click(\n              statusRef.current,\n              e.targetTouches[0].clientX,\n              e.targetTouches[0].clientY,\n              e.currentTarget.clientWidth,\n            )\n          }\n        >\n          <div className={transformClass} style={transformStyle}>\n            {[\"dragging\", \"dragEnding\"].includes(status) && [\n              ...(slide === 0\n                ? [CAROUSEL_ITEMS[CAROUSEL_ITEMS.length - 1]]\n                : []),\n              ...CAROUSEL_ITEMS.slice(slide === 0 ? 0 : slide - 1, slide + 2),\n              ...(slide === CAROUSEL_ITEMS.length - 1\n                ? [CAROUSEL_ITEMS[0]]\n                : []),\n            ]}\n            {status === \"moving-right\" &&\n              CAROUSEL_ITEMS.slice(moveOption.srcIdx, moveOption.dstIdx + 1)}\n            {status === \"moving-left\" &&\n              CAROUSEL_ITEMS.slice(moveOption.dstIdx, moveOption.srcIdx + 1)}\n            {[\"stationary\", \"clicked\", \"clickCanceled\"].includes(status) &&\n              CAROUSEL_ITEMS[slide]}\n          </div>\n          <div className=\"carousel-control\">\n            <div\n              className=\"control left\"\n              onMouseDown={() => {\n                if (statusRef.current === \"stationary\") setClickMove(\"left\")\n              }}\n              onTouchStart={() => {\n                if (statusRef.current === \"stationary\") setClickMove(\"left\")\n              }}\n            >\n              <ArrowLeft className=\"arrow\" />\n            </div>\n            <div\n              className=\"control right\"\n              onMouseDown={() => {\n                if (statusRef.current === \"stationary\") setClickMove(\"right\")\n              }}\n              onTouchStart={() => {\n                if (statusRef.current === \"stationary\") setClickMove(\"right\")\n              }}\n            >\n              <ArrowLeft className=\"arrow right\" />\n            </div>\n          </div>\n        </div>\n        <div className=\"carousel-indicator\">\n          {CAROUSEL_ITEMS.map((_, idx) => (\n            <button\n              key={idx}\n              className={`indicator${idx === slide ? \" active\" : \"\"}`}\n              onClick={() =>\n                onIndicatorClick(statusRef.current, slideRef.current, idx)\n              }\n            />\n          ))}\n        </div>\n      </div>\n\n      <div className=\"break\" />\n\n      <Button\n        onClick={() =>\n          openModal({\n            className: \"all-photo-modal\",\n            closeOnClickBackground: true,\n            header: <div className=\"title\">사진 전체보기</div>,\n            content: (\n              <>\n                <div className=\"photo-list\">\n                  {GALLERY_IMAGES.map((image, idx) => (\n                    <img\n                      key={idx}\n                      src={image}\n                      alt={`${idx}`}\n                      draggable={false}\n                      onClick={() => {\n                        if (statusRef.current === \"stationary\") {\n                          if (idx !== slideRef.current) {\n                            move(slideRef.current, idx)\n                          }\n                          closeModal()\n                        }\n                      }}\n                    />\n                  ))}\n                </div>\n                <div className=\"break\" />\n              </>\n            ),\n            footer: (\n              <Button\n                buttonStyle=\"style2\"\n                className=\"bg-light-grey-color text-dark-color\"\n                onClick={closeModal}\n              >\n                닫기\n              </Button>\n            ),\n          })\n        }\n      >\n        사진 전체보기\n      </Button>\n    </LazyDiv>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}